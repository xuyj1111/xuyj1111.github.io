<html>
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>docker å’Œ kubernetes çš„ä½¿ç”¨ | æ´—è¡£æœºçš„åšå®¢</title>
<link rel="shortcut icon" href="https://xuyj1111.github.io/favicon.ico?v=1727363389169">
<link href="https://cdn.jsdelivr.net/npm/remixicon@2.3.0/fonts/remixicon.css" rel="stylesheet">
<link rel="stylesheet" href="https://xuyj1111.github.io/styles/main.css">
<link rel="alternate" type="application/atom+xml" title="docker å’Œ kubernetes çš„ä½¿ç”¨ | æ´—è¡£æœºçš„åšå®¢ - Atom Feed" href="https://xuyj1111.github.io/atom.xml">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700">



    <meta name="description" content="docker
ç®€å•ä»‹ç»
docker æ˜¯ä¸€ä¸ªåº”ç”¨å®¹å™¨å¼•æ“ï¼Œé‡è¦æ¦‚å¿µæœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š

é•œåƒ
å®¹å™¨
æ•°æ®å·

é•œåƒå’Œå®¹å™¨çš„å…³ç³»ï¼Œä¸é¢å‘å¯¹è±¡ä¸­çš„ç±»å’Œå®ä¾‹ä¸€æ ·ï¼Œé•œåƒæ˜¯é™æ€çš„å®šä¹‰ï¼Œå®¹å™¨æ˜¯é•œåƒè¿è¡Œçš„å®ä½“ã€‚å®¹å™¨å¯ä»¥è¢«åˆ›å»ºã€å¯åŠ¨ã€åœæ­¢ã€åˆ é™¤ã€æš‚åœç­‰ï¼Œå®¹å™¨æœ¬è´¨..." />
    <meta name="keywords" content="åŸåˆ›,ä½¿ç”¨æ‰‹å†Œ" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
    <script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>

 <script src='//unpkg.com/valine/dist/Valine.min.js'></script>

  </head>
  <body>
    <div class="main">
      <div class="main-content">
        <div class="site-header">
  <a href="https://xuyj1111.github.io">
  <img class="avatar" src="https://xuyj1111.github.io/images/avatar.png?v=1727363389169" alt="">
  </a>
  <h1 class="site-title">
    æ´—è¡£æœºçš„åšå®¢
  </h1>
  <p class="site-description">
    ã€ä¸€åJavaå¼€å‘ã€‘slaveğŸ‘‰https://www.cnblogs.com/xuyj1111/
  </p>
  <div class="menu-container">
    
      
        <a href="https://xuyj1111.github.io" class="menu">
          ä¸»é¡µ
        </a>
      
    
      
        <a href="https://xuyj1111.github.io/archives" class="menu">
          æ–‡ç« 
        </a>
      
    
      
        <a href="https://xuyj1111.github.io/tags" class="menu">
          æ ‡ç­¾
        </a>
      
    
  </div>
  <div class="social-container">
    
      
        <a href="https://github.com/xuyj1111" target="_blank">
          <i class="ri-github-line"></i>
        </a>
      
    
      
    
      
    
      
    
      
    
  </div>
  <form id="gridea-search-form" action="https://xuyj1111.github.io/search/">
    <input name="q" />
  </form>
</div>

        <div class="post-detail">
          <article class="post">
            <h2 class="post-title">
              docker å’Œ kubernetes çš„ä½¿ç”¨
            </h2>
            <div class="post-info">
              <span>
                2023-02-01
              </span>
              <span>
                9 min read
              </span>
              
                <a href="https://xuyj1111.github.io/WSbjWpIkN/" class="post-tag">
                  # åŸåˆ›
                </a>
              
                <a href="https://xuyj1111.github.io/0shj16Tx0/" class="post-tag">
                  # ä½¿ç”¨æ‰‹å†Œ
                </a>
              
            </div>
            
            <div class="post-content-wrapper">
              <div class="post-content">
                <h2 id="docker">docker</h2>
<h3 id="ç®€å•ä»‹ç»">ç®€å•ä»‹ç»</h3>
<p>docker æ˜¯ä¸€ä¸ªåº”ç”¨å®¹å™¨å¼•æ“ï¼Œé‡è¦æ¦‚å¿µæœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š</p>
<ol>
<li>é•œåƒ</li>
<li>å®¹å™¨</li>
<li>æ•°æ®å·</li>
</ol>
<p>é•œåƒå’Œå®¹å™¨çš„å…³ç³»ï¼Œä¸é¢å‘å¯¹è±¡ä¸­çš„ç±»å’Œå®ä¾‹ä¸€æ ·ï¼Œé•œåƒæ˜¯é™æ€çš„å®šä¹‰ï¼Œå®¹å™¨æ˜¯é•œåƒè¿è¡Œçš„å®ä½“ã€‚å®¹å™¨å¯ä»¥è¢«åˆ›å»ºã€å¯åŠ¨ã€åœæ­¢ã€åˆ é™¤ã€æš‚åœç­‰ï¼Œå®¹å™¨æœ¬è´¨ä¸Šæ˜¯è¿›ç¨‹ã€‚</p>
<p>é¦–å…ˆéœ€è¦æœ‰ä»¥ä¸‹å‡ ä¸ªæ¦‚å¿µï¼š</p>
<ul>
<li>docker åœ¨ Windows å’Œ Mac ä¸Šéƒ½æœ‰æ¡Œé¢ç«¯äº†ï¼Œæ­¤æ—¶çš„ Windows/Mac åˆ™è¢«ç§°ä¸ºâ€œå®¿ä¸»æœºâ€</li>
<li>å®¹å™¨å­˜å‚¨å±‚çš„ç”Ÿå‘½å‘¨æœŸå’Œå®¹å™¨ä¸€æ ·ï¼Œå®¹å™¨åœæ­¢ï¼Œåˆ™å­˜å‚¨å±‚ä¸¢å¤±</li>
<li>å®¹å™¨ä¹‹é—´æ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œä¸èƒ½ç›´æ¥è®¿é—®</li>
</ul>
<p>æ•°æ®å·çš„ä½œç”¨åˆ™æ˜¯ç”¨æ¥<code>å°†å®¹å™¨æ•°æ®æŒä¹…åŒ–</code>ï¼Œå’Œ<code>ä½¿å®¹å™¨ä¹‹é—´ã€å®¹å™¨å’Œå®¿ä¸»æœºä¹‹é—´æ•°æ®ä¼ è¾“</code></p>
<h3 id="å®‰è£…">å®‰è£…</h3>
<ol>
<li>Docker Desktop å‚»ç“œå®‰è£…</li>
<li>é…ç½®é•œåƒåŠ é€Ÿå™¨ç½‘å€ï¼Œä½¿ç”¨é˜¿é‡Œé•œåƒï¼Œéœ€è¦ç™»å½•è‡ªå·±è´¦å·<br>
<img src="https://xuyj1111.github.io/post-images/1675233768552.png" alt="" loading="lazy"></li>
</ol>
<h3 id="å‘½ä»¤">å‘½ä»¤</h3>
<ul>
<li><code>docker [command] --help</code>å¸®åŠ©å‘½ä»¤</li>
</ul>
<p>é•œåƒå‘½ä»¤ğŸ‘‡</p>
<ul>
<li><code>docker images</code>åˆ—å‡ºæ‰€æœ‰é•œåƒ</li>
<li><code>docker inspect é•œåƒå</code>æŸ¥çœ‹é•œåƒçš„è¯¦ç»†ä¿¡æ¯</li>
<li><code>docker search é•œåƒå æˆ–è€… ä»“åº“åç§°/é•œåƒå</code>æŸ¥è¯¢é•œåƒã€é»˜è®¤å®˜æ–¹ä»“åº“åä¸º libraryã€‘</li>
<li><code>docker pull é•œåƒå æˆ–è€… ä»“åº“åç§°/é•œåƒå</code>ä¸‹è½½é•œåƒ</li>
<li><code>docker rmi [å¯é€‰å‚æ•°] é•œåƒå [é•œåƒå...]</code>
<ul>
<li>-fï¼šå¼ºåˆ¶åˆ é™¤</li>
</ul>
</li>
</ul>
<p>å®¹å™¨å‘½ä»¤ğŸ‘‡</p>
<ul>
<li><code>docker ps</code>åˆ—å‡ºæ‰€æœ‰æ­£åœ¨è¿è¡Œçš„å®¹å™¨</li>
<li><code>docker inspect å®¹å™¨id æˆ– å®¹å™¨å</code>æŸ¥çœ‹å®¹å™¨çš„è¯¦ç»†ä¿¡æ¯</li>
<li><code>docker run [å¯é€‰å‚æ•°] é•œåƒå [å‘å¯åŠ¨å®¹å™¨ä¸­ä¼ å…¥çš„å‘½ä»¤]</code>
<ul>
<li>-iï¼šæ‰“å¼€æ ‡å®¹å™¨çš„æ ‡å‡†è¾“å…¥æ¥å£ï¼Œé€šå¸¸-idæˆ–-itä½¿ç”¨</li>
<li>-dï¼šåå°è¿è¡Œ</li>
<li>-tï¼šå®¹å™¨å¯åŠ¨åè¿›å…¥å‘½ä»¤è¡Œ</li>
<li>--nameï¼šä¸ºåˆ›å»ºçš„å®¹å™¨å‘½åï¼Œé»˜è®¤éšæœºï¼Œä¸æ”¯æŒä¸­æ–‡å­—ç¬¦</li>
<li>-vï¼šç›®å½•æ˜ å°„ï¼Œå®¿ä¸»æœºç›®å½•:å®¹å™¨ç›®å½•ï¼Œåœ¨å®¿ä¸»æœºä¸Šä¿®æ”¹ä¼šåŒæ­¥åˆ°å®¹å™¨ä¸Šã€æŒä¹…åŒ–ã€‘
<ul>
<li>ä¸€ä¸ªå®¹å™¨å¯ä»¥æ˜ å°„å¤šä¸ªç›®å½•</li>
<li>ä¸¤ä¸ªå®¹å™¨æ˜ å°„åŒä¸€ä¸ªç›®å½•ï¼Œå®ç°ä¸¤ä¸ªå®¹å™¨çš„æ•°æ®äº¤æ¢</li>
</ul>
</li>
<li>-pï¼šç«¯å£æ˜ å°„ï¼Œå®¿ä¸»æœºç«¯å£:å®¹å™¨ç«¯å£</li>
</ul>
</li>
<li><code>docker exec [å¯é€‰å‚æ•°] å®¹å™¨å /bin/bash</code>
<ul>
<li>-iï¼šæ‰“å¼€æ ‡å®¹å™¨çš„æ ‡å‡†è¾“å…¥æ¥å£ï¼Œé€šå¸¸-idæˆ–-itä½¿ç”¨</li>
<li>-dï¼šåå°è¿è¡Œ</li>
<li>-tï¼šå®¹å™¨å¯åŠ¨åè¿›å…¥å‘½ä»¤è¡Œ</li>
</ul>
</li>
<li><code>docker start å®¹å™¨id æˆ– å®¹å™¨å</code>å¯åŠ¨å®¹å™¨</li>
<li><code>docker stop å®¹å™¨id æˆ– å®¹å™¨å</code>åœæ­¢å®¹å™¨</li>
<li><code>docker rm [å¯é€‰å‚æ•°] å®¹å™¨id æˆ– å®¹å™¨å [IMAGE...]</code>åˆ é™¤å®¹å™¨ã€è¿è¡ŒçŠ¶æ€åˆ é™¤å¤±è´¥ï¼Œåœæ­¢çŠ¶æ€æ‰å¯åˆ é™¤ã€‘
<ul>
<li>-fï¼šå¼ºåˆ¶åˆ é™¤</li>
<li>-lï¼šç§»é™¤å®¹å™¨é—´çš„ç½‘ç»œè¿æ¥ï¼Œå¹¶éå®¹å™¨æœ¬èº«</li>
<li>-vï¼šåˆ é™¤ä¸å®¹å™¨å…³è”çš„å·</li>
</ul>
</li>
</ul>
<p>åœ¨ centos å®¹å™¨ä¸­æ‰§è¡Œ<code>hostnamectl set-hostname åå­—</code>å‘½ä»¤ï¼Œæƒ³è¦ä¿®æ”¹ä¸»æœºåï¼Œå‡ºç°æŠ¥é”™ï¼Œç„¶åä»¥ç‰¹æƒæ¨¡å¼å†ç”Ÿæˆå®¹å™¨è§£å†³<code>docker run -itd --name master01 --privileged å®¹å™¨å /usr/sbin/init</code>ï¼Œå‚è€ƒæ–‡æ¡£<a href="https://blog.csdn.net/Dontla/article/details/125329548?utm_medium=distribute.pc_relevant.none-task-blog-2~default~baidujs_baidulandingword~default-1-125329548-blog-105614643.pc_relevant_3mothn_strategy_recovery&amp;spm=1001.2101.3001.4242.2&amp;utm_relevant_index=4">docker run --privilegedå‚æ•°</a></p>
<p>æ•°æ®å·å®¹å™¨ğŸ‘‡<br>
å¯ä»¥ä½¿ç”¨<code>docker run</code>å‘½ä»¤çš„<code>-v</code>å‚æ•°å¯åŠ¨æ•°æ®å·å®¹å™¨ï¼Œå®ç°å®¹å™¨å’Œå®¿ä¸»æœºçš„æ•°æ®å…±äº«</p>
<ul>
<li><code>docker run -itd --name=c3 -v /volume centos /bin/bash</code>
<ul>
<li>æŒ‰ç…§æ ¼å¼ï¼Œåº”è¯¥æ˜¯â€œå®¿ä¸»æœºç›®å½•:å®¹å™¨ç›®å½•â€ï¼Œæ­¤å¤„å†™æ³•çœç•¥<code>/volume</code>ï¼Œå³<code>/volume:/volume</code></li>
</ul>
</li>
</ul>
<p>è¿˜å¯ä»¥ä½¿ç”¨<code>--volumes-from</code>å‚æ•°æŒ‡å®šçˆ¶å®¹å™¨</p>
<ul>
<li><code>docker run -itd --name=c1 --volumes-from c3 centos /bin/bash</code><br>
å†å¯åŠ¨ c2 <code>docker run -itd --name=c2 --volumes-from c3 centos /bin/bash</code>ï¼Œå®ç°ä¸‹å›¾ç»“æ„ï¼šc1 å’Œ c2 å®é™…ä¸Šéƒ½å…³è”åˆ°å®¿ä¸»æœºï¼Œå³ä½¿ c3 æŒ‚äº†ï¼Œc1ã€c2ã€å®¿ä¸»æœºä¹‹é—´è¿˜æ˜¯èƒ½æ•°æ®å…±äº«<br>
<img src="https://xuyj1111.github.io/post-images/1675241214556.png" alt="" loading="lazy"></li>
</ul>
<p>é•œåƒåˆ¶ä½œğŸ‘‡<br>
å¦‚æœåœ¨å®¹å™¨ä¸­è¿è¡Œä¿®æ”¹äº†è‹¥å¹²æ–‡ä»¶ï¼Œå¹¶äº§ç”Ÿäº†æ•°æ®ï¼Œæƒ³è¦ä¼ è¾“ç»™åˆ«äººä½¿ç”¨ï¼Œå°±éœ€è¦å°†<strong>å®¹å™¨è½¬æ¢ä¸ºé•œåƒ</strong>ï¼Œä½†é•œåƒä¸èƒ½ç›´æ¥ä¼ è¾“ï¼Œè¿˜éœ€è¦å†å°†<strong>é•œåƒè½¬ä¸ºå‹ç¼©æ–‡ä»¶</strong>ï¼Œæ¥æ”¶æ–¹æ”¶åˆ°å‹ç¼©æ–‡ä»¶åï¼Œè¿˜éœ€è¦<strong>è§£å‹æ–‡ä»¶æˆé•œåƒ</strong>ï¼Œæ‰å¯ä½¿ç”¨<br>
<code>docker commit å®¹å™¨id é•œåƒåç§°:ç‰ˆæœ¬å·</code>å®¹å™¨è½¬æ¢ä¸ºé•œåƒ<br>
<code>docker save -o å‹ç¼©æ–‡ä»¶åç§° é•œåƒåç§°:ç‰ˆæœ¬å·</code>é•œåƒè½¬æ¢ä¸ºå‹ç¼©æ–‡ä»¶<br>
<code>docker load -i å‹ç¼©æ–‡ä»¶åç§°</code>è§£å‹æ–‡ä»¶æˆé•œåƒ</p>
<h3 id="dockerfile-æ–‡ä»¶">Dockerfile æ–‡ä»¶</h3>
<p>éœ€è¦æ”¾åœ¨å®¹å™¨çš„ç¬¬ä¸€å±‚ç›®å½•ï¼Œä¸”ä¸èƒ½åç¼€åã€‚Dockerfile æœ‰ä¸€å¥—è¯­æ³•ï¼Œæ­¤å¤„ä¸åšç¬”è®°<br>
<img src="https://xuyj1111.github.io/post-images/1675241930173.png" alt="" loading="lazy"></p>
<hr>
<h2 id="kubernetes">kubernetes</h2>
<blockquote>
<p>ä½œä¸ºåç«¯ä»…äº†è§£å¤§æ¦‚ï¼Œæ²¡æœ‰å¯¹å…¶æ·±å…¥å­¦ä¹ </p>
</blockquote>
<h3 id="å‰æƒ…æè¦">å‰æƒ…æè¦</h3>
<p>åœ¨ docker å®¹å™¨åŒ–æŠ€æœ¯çš„å‘å±•åï¼Œå¼€å‘è¿‡ç¨‹ä¸­å¯¹å®¹å™¨çš„æ•°é‡é€æ­¥å¢åŠ ï¼Œè¿›è€Œäº§ç”Ÿäº†ç®¡ç†å®¹å™¨çš„éœ€æ±‚ã€‚docker æœ‰ä¸‰å‰‘å®¢ï¼š</p>
<ol>
<li>Docker Machineï¼šç®¡ç†å•å°æˆ–å¤šå°ä¸»æœºæœ¬èº«</li>
<li>Docker Composeï¼šç®¡ç†å•ä¸»æœºå®¹å™¨</li>
<li>Docker Swarmï¼šç®¡ç†å¤šä¸»æœºå®¹å™¨</li>
</ol>
<p>å…¶ä¸­çš„ Docker Swarm å’Œ Kubernetes è§’è‰²å®šä½ç›¸åŒï¼Œä½†ç›®å‰æµè¡Œä½¿ç”¨ Kubernetesã€‚</p>
<h3 id="ä»‹ç»">ä»‹ç»</h3>
<blockquote>
<p>è¯¦ç»†å­¦ä¹ å‚è€ƒ<a href="https://juejin.cn/post/6952331691524358174#heading-0">https://juejin.cn/post/6952331691524358174#heading-0</a></p>
</blockquote>
<p><strong>å®‰è£…ï¼š</strong> åœ¨ Docker Destop ä¸­å¯åŠ¨å³å¯<br>
<img src="https://xuyj1111.github.io/post-images/1675244010614.png" alt="" loading="lazy"></p>
<p><strong>åŠŸèƒ½ï¼š</strong></p>
<ul>
<li>è‡ªåŠ¨è£…ç®±ï¼šè‡ªåŠ¨éƒ¨ç½²å®¹å™¨</li>
<li>è‡ªåŠ¨ä¿®å¤ï¼šä¼šé‡å¯å®¹å™¨ï¼Œä¼šé‡æ–°éƒ¨ç½²ï¼Œä¼šé‡æ–°è°ƒåº¦ï¼Œå®¹å™¨æ­£å¸¸æ‰å¯¹å¤–æä¾›æœåŠ¡</li>
<li>æ°´å¹³æ‰©å±•ï¼šå¯¹å®¹å™¨è§„æ¨¡æ‰©å¤§æˆ–è£å‰ª</li>
<li>æœåŠ¡å‘ç°ã€è´Ÿè½½å‡è¡¡</li>
<li>æ»šåŠ¨æ›´æ–°ï¼šä¸€æ¬¡æ€§æˆ–æ‰¹é‡å¼æ›´æ–°</li>
<li>ç‰ˆæœ¬å›é€€</li>
<li>çƒ­éƒ¨ç½²</li>
<li>è‡ªåŠ¨å­˜å‚¨æ•°æ®ï¼Œå¯ä»¥å­˜å‚¨åœ¨æœ¬åœ°ã€äº‘ç«¯ç­‰</li>
<li>......</li>
</ul>
<p><strong>èµ„æºå¯¹è±¡ï¼š</strong></p>
<ol>
<li>podï¼šk8s ç®¡ç†è°ƒåº¦æœ€å°çš„å•ä½ã€‚1 ä¸ª pod ä¸­å¯ä»¥åŒ…å« 1 ä¸ªæˆ–å¤šä¸ªå®¹å™¨</li>
<li>namespaceï¼šé›†ç¾¤å†…éƒ¨çš„é€»è¾‘åˆ†å‰²ã€‚pod åœ¨ ns å†…</li>
<li>nodeï¼šk8s é›†ç¾¤ä¸­çš„èŠ‚ç‚¹</li>
</ol>
<p>è¿˜æœ‰å¾ˆå¤šèµ„æºå¯¹è±¡ï¼Œç›®å‰æ²¡æœ‰å¯¹å…¶å­¦ä¹ </p>
<h3 id="å‘½ä»¤-2">å‘½ä»¤</h3>
<blockquote>
<p><a href="https://kubernetes.io/docs/reference/generated/kubectl/kubectl-commands">å®˜æ–¹å‘½ä»¤æ–‡æ¡£</a></p>
</blockquote>
<ul>
<li><code>kubectl [command] --help</code>å¸®åŠ©å‘½ä»¤</li>
<li><code>kubectl apply -f</code>æ–‡ä»¶æ‰§è¡Œæ–‡ä»¶</li>
<li><code>kubectl cluster-info dump</code>æŸ¥çœ‹é›†ç¾¤ä¿¡æ¯</li>
<li><code>kubectl get nodes</code>æŸ¥çœ‹é›†ç¾¤èŠ‚ç‚¹</li>
</ul>
<p>configğŸ‘‡</p>
<blockquote>
<p>kubectl é»˜è®¤ä¼šä» ~/.kube ç›®å½•ä¸‹æŸ¥æ‰¾æ–‡ä»¶åä¸º config çš„æ–‡ä»¶ï¼Œä¹Ÿèƒ½é€šè¿‡è®¾ç½®ç¯å¢ƒå˜ KUBECONFIG æˆ–è€…é€šè¿‡è®¾ç½®å»æŒ‡å®šå…¶å®ƒ kubeconfig æ–‡ä»¶ã€‚kubeconfigå°±æ˜¯ä¸ºè®¿é—®é›†ç¾¤æ‰€ä½œçš„é…ç½®ï¼Œå‚è€ƒæ–‡ç« <a href="https://blog.csdn.net/w2009211777/article/details/123798721">https://blog.csdn.net/w2009211777/article/details/123798721</a></p>
</blockquote>
<p>å¢åŠ æ–°é›†ç¾¤çš„é…ç½®ç¤ºä¾‹ï¼š</p>
<pre><code>kubectl config set-cluster jdcloud --server=https://xxx.xxx.xxx.xxx:xxxx --insecure-skip-tls-verify
kubectl config set-credentials jdcloud --token=xxxxxx
kubectl config set-context devtest --cluster=jdcloud --namespace=devtest --user=jdcloud
</code></pre>
<ul>
<li><code>kubectl config get-contexts</code>æŸ¥çœ‹ç¯å¢ƒ</li>
<li><code>kubectl config use-context docker-desktop</code>åˆ‡æ¢ç¯å¢ƒ</li>
</ul>
<p>podğŸ‘‡</p>
<ul>
<li><code>kubectl describe pod podå</code>æŸ¥çœ‹podé…ç½®ä¿¡æ¯</li>
<li><code>kubectl get pod</code>
<ul>
<li>-o wideï¼šæŸ¥çœ‹æ›´å¤šä¿¡æ¯ï¼Œä¾‹å¦‚node</li>
<li>-n namespaceåï¼šæŸ¥çœ‹æŸ ns ä¸‹çš„ pod</li>
</ul>
</li>
<li><code>kubectl delete pod podå</code>
<ul>
<li>-n namespaceå</li>
</ul>
</li>
<li><code>kubectl logs podå</code>æŸ¥çœ‹podæ—¥å¿—
<ul>
<li>-n namespaceå</li>
<li>-c å®¹å™¨åï¼šè‹¥æœ‰å¤šä¸ªå®¹å™¨åˆ™æŒ‡å®šï¼Œpodå†…å•ä¸ªå®¹å™¨å¯çœç•¥</li>
<li>-fï¼šæŒç»­çœ‹æ—¥å¿—</li>
<li>--tail=10ï¼šè·å–æœ€è¿‘åæ¡æ—¥å¿—</li>
</ul>
</li>
<li><code>kubectl exec -it podå -- /bin/bash</code>è¿›å…¥podå®¹å™¨ï¼ˆexité€€å‡ºï¼‰
<ul>
<li>-c å®¹å™¨åï¼šè‹¥æœ‰å¤šä¸ªå®¹å™¨åˆ™æŒ‡å®šï¼Œpodå†…å•ä¸ªå®¹å™¨å¯çœç•¥</li>
</ul>
</li>
<li><code>kubectl get pod podå -o jsonpath=&quot;{.spec['containers','initContainers'][*].name}&quot; -n namespaceå</code>æŸ¥çœ‹podä¸‹æ‰€æœ‰å®¹å™¨</li>
<li><code>kubectl get pod,svc</code>æŸ¥çœ‹podåŠå…¶ipå’Œç«¯å£</li>
</ul>
<p>namespaceğŸ‘‡</p>
<ul>
<li><code>kubectl get ns</code>æŸ¥è¯¢æ‰€æœ‰ namespace</li>
<li><code>kubectl get ns namespaceå</code>æŸ¥è¯¢æŸä¸ª namespace</li>
<li><code>kubectl describe ns namespaceå</code>æŸ¥è¯¢æŸä¸ª namespace è¯¦æƒ…</li>
<li><code>kubectl create ns namespaceå</code>åˆ›å»º namespace</li>
<li><code>kubectl delete ns namespaceå</code>åˆ é™¤ namespace</li>
</ul>
<h3 id="å®‰è£…-kubernetes-dashboard">å®‰è£… Kubernetes Dashboard</h3>
<p>é¦–å…ˆéœ€è¦æ‰“å¼€ Docker Desktopï¼Œå¯åŠ¨ k8s</p>
<ol>
<li>æ‰§è¡Œå‘½ä»¤ï¼Œä¸‹è½½ Kubernetes Dashboard <code>kubectl apply -f https://raw.githubusercontent.com/kubernetes/dashboard/master/aio/deploy/recommended.yaml</code></li>
<li>æ–°å»ºç”¨æˆ·
<ol>
<li>æ–°å»ºæ–‡ä»¶â€œadmin-user.yamlâ€</li>
<li>æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼Œå†æ‰§è¡Œå‘½ä»¤<code>kubectl create -f admin-user.yaml</code></li>
</ol>
</li>
</ol>
<pre><code>apiVersion: v1
kind: ServiceAccount
metadata:
  name: admin-user
  namespace: kubernetes-dashboard
</code></pre>
<ol start="3">
<li>ç»‘å®šç”¨æˆ·å…³ç³»
<ol>
<li>æ–°å»ºæ–‡ä»¶â€œadmin-user-role-binding.yamlâ€</li>
<li>æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼Œå†æ‰§è¡Œå‘½ä»¤<code>kubectl create -f admin-user-role-binding.yaml</code></li>
</ol>
</li>
</ol>
<pre><code>apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: admin-user
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: cluster-admin
subjects:
- kind: ServiceAccount
  name: admin-user
  namespace: kubernetes-dashboard
</code></pre>
<p>ã€è‹¥æ’¤é”€ï¼Œæ‰§è¡Œ<code>kubectl delete -f ç›¸åº”çš„yamlæ–‡ä»¶</code>ã€‘<br>
4. è·å–token<code>kubectl -n kubernetes-dashboard describe secret $(kubectl -n kubernetes-dashboard get secret | grep admin-user | awk '{print $1}')</code><br>
5. å¯åŠ¨æœåŠ¡<code>kubectl proxy</code><br>
6. è®¿é—® <a href="http://localhost:8001/api/v1/namespaces/kubernetes-dashboard/services/https:kubernetes-dashboard:/proxy/">http://localhost:8001/api/v1/namespaces/kubernetes-dashboard/services/https:kubernetes-dashboard:/proxy/</a><br>
7. é€‰æ‹©â€œTokenâ€ï¼Œè¾“å…¥ä¸Šé¢è¿”å›çš„ tokenï¼Œå³å¯ç™»é™†<br>
<img src="https://xuyj1111.github.io/post-images/1675329742585.png" alt="" loading="lazy"><br>
<img src="https://xuyj1111.github.io/post-images/1675329907302.png" alt="" loading="lazy"></p>
<p>p.s.<br>
è·å– token çš„ç¬¬äºŒä¸ªæ–¹å¼ï¼š</p>
<ul>
<li><code>kubectl get secret -n kubernetes-dashboard</code><br>
<img src="https://xuyj1111.github.io/post-images/1675330335470.png" alt="" loading="lazy"></li>
<li>ä½¿ç”¨ä¸Šå›¾çš„â€œadmin-user-token-f674xâ€ï¼Œæ‹¼æ¥å‘½ä»¤<code>kubectl describe secret admin-user-token-f674x -n kubernetes-dashboard</code><br>
<img src="https://xuyj1111.github.io/post-images/1675330502829.png" alt="" loading="lazy"></li>
</ul>

              </div>
              <div class="toc-container">
                <ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#docker">docker</a>
<ul>
<li><a href="#%E7%AE%80%E5%8D%95%E4%BB%8B%E7%BB%8D">ç®€å•ä»‹ç»</a></li>
<li><a href="#%E5%AE%89%E8%A3%85">å®‰è£…</a></li>
<li><a href="#%E5%91%BD%E4%BB%A4">å‘½ä»¤</a></li>
<li><a href="#dockerfile-%E6%96%87%E4%BB%B6">Dockerfile æ–‡ä»¶</a></li>
</ul>
</li>
<li><a href="#kubernetes">kubernetes</a>
<ul>
<li><a href="#%E5%89%8D%E6%83%85%E6%8F%90%E8%A6%81">å‰æƒ…æè¦</a></li>
<li><a href="#%E4%BB%8B%E7%BB%8D">ä»‹ç»</a></li>
<li><a href="#%E5%91%BD%E4%BB%A4-2">å‘½ä»¤</a></li>
<li><a href="#%E5%AE%89%E8%A3%85-kubernetes-dashboard">å®‰è£… Kubernetes Dashboard</a></li>
</ul>
</li>
</ul>
</li>
</ul>

              </div>
            </div>
          </article>
        </div>

        
          <div class="next-post">
            <div class="next">ä¸‹ä¸€ç¯‡</div>
            <a href="https://xuyj1111.github.io/VTHVX8QhD/">
              <h3 class="post-title">
                ã€TOPã€‘å°æœ¬æœ¬çš„ä¸€äº›ä»‹ç»
              </h3>
            </a>
          </div>
        

        

        <div class="site-footer">
  
  <a class="rss" href="https://xuyj1111.github.io/atom.xml" target="_blank">
    <i class="ri-rss-line"></i> RSS
  </a>
</div>

      </div>
    </div>

    <script>
      hljs.initHighlightingOnLoad()

      let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");

      // This should probably be throttled.
      // Especially because it triggers during smooth scrolling.
      // https://lodash.com/docs/4.17.10#throttle
      // You could do like...
      // window.addEventListener("scroll", () => {
      //    _.throttle(doThatStuff, 100);
      // });
      // Only not doing it here to keep this Pen dependency-free.

      window.addEventListener("scroll", event => {
        let fromTop = window.scrollY;

        mainNavLinks.forEach((link, index) => {
          let section = document.getElementById(decodeURI(link.hash).substring(1));
          let nextSection = null
          if (mainNavLinks[index + 1]) {
            nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(1));
          }
          if (section.offsetTop <= fromTop) {
            if (nextSection) {
              if (nextSection.offsetTop > fromTop) {
                link.classList.add("current");
              } else {
                link.classList.remove("current");    
              }
            } else {
              link.classList.add("current");
            }
          } else {
            link.classList.remove("current");
          }
        });
      });

    </script>



    <div id="vcomments"></div>
    <script>
        new Valine({
            el: '#vcomments',
            appId: 'ot2L3hKJVxTAXnr1VQt7wm70-gzGzoHsz',
            appKey: 'BjaYGo2m6zV3mCvxGLGsDP5V'
        })
    </script>



  </body>

</html>
