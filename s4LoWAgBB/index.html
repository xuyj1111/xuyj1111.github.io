<html>
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ã€Javaã€‘SpringBatch çº¯çº¯çš„ç¬”è®° | æ´—è¡£æœºçš„åšå®¢</title>
<link rel="shortcut icon" href="https://xuyj1111.github.io/favicon.ico?v=1727363389169">
<link href="https://cdn.jsdelivr.net/npm/remixicon@2.3.0/fonts/remixicon.css" rel="stylesheet">
<link rel="stylesheet" href="https://xuyj1111.github.io/styles/main.css">
<link rel="alternate" type="application/atom+xml" title="ã€Javaã€‘SpringBatch çº¯çº¯çš„ç¬”è®° | æ´—è¡£æœºçš„åšå®¢ - Atom Feed" href="https://xuyj1111.github.io/atom.xml">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700">



    <meta name="description" content="
ä¸€ä¸ª Job ç”±å¤šä¸ª Step ç»„æˆ
Step æœ‰ä¸¤ç§å®ç°æ–¹å¼ï¼šTaskletå’ŒRead-Process-Write
ä¸¤ç§å®ç°æ–¹å¼å¯ä»¥å•ç‹¬ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥ä¸€èµ·ä½¿ç”¨
Spring Batch æä¾›äº† skip å’Œ retry æœºåˆ¶


ä½¿ç”¨ T..." />
    <meta name="keywords" content="åŸåˆ›,ä½¿ç”¨æ‰‹å†Œ" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
    <script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>

 <script src='//unpkg.com/valine/dist/Valine.min.js'></script>

  </head>
  <body>
    <div class="main">
      <div class="main-content">
        <div class="site-header">
  <a href="https://xuyj1111.github.io">
  <img class="avatar" src="https://xuyj1111.github.io/images/avatar.png?v=1727363389169" alt="">
  </a>
  <h1 class="site-title">
    æ´—è¡£æœºçš„åšå®¢
  </h1>
  <p class="site-description">
    ã€ä¸€åJavaå¼€å‘ã€‘slaveğŸ‘‰https://www.cnblogs.com/xuyj1111/
  </p>
  <div class="menu-container">
    
      
        <a href="https://xuyj1111.github.io" class="menu">
          ä¸»é¡µ
        </a>
      
    
      
        <a href="https://xuyj1111.github.io/archives" class="menu">
          æ–‡ç« 
        </a>
      
    
      
        <a href="https://xuyj1111.github.io/tags" class="menu">
          æ ‡ç­¾
        </a>
      
    
  </div>
  <div class="social-container">
    
      
        <a href="https://github.com/xuyj1111" target="_blank">
          <i class="ri-github-line"></i>
        </a>
      
    
      
    
      
    
      
    
      
    
  </div>
  <form id="gridea-search-form" action="https://xuyj1111.github.io/search/">
    <input name="q" />
  </form>
</div>

        <div class="post-detail">
          <article class="post">
            <h2 class="post-title">
              ã€Javaã€‘SpringBatch çº¯çº¯çš„ç¬”è®°
            </h2>
            <div class="post-info">
              <span>
                2023-03-02
              </span>
              <span>
                8 min read
              </span>
              
                <a href="https://xuyj1111.github.io/WSbjWpIkN/" class="post-tag">
                  # åŸåˆ›
                </a>
              
                <a href="https://xuyj1111.github.io/0shj16Tx0/" class="post-tag">
                  # ä½¿ç”¨æ‰‹å†Œ
                </a>
              
            </div>
            
            <div class="post-content-wrapper">
              <div class="post-content">
                <ul>
<li>ä¸€ä¸ª Job ç”±å¤šä¸ª Step ç»„æˆ</li>
<li>Step æœ‰ä¸¤ç§å®ç°æ–¹å¼ï¼š<code>Tasklet</code>å’Œ<code>Read-Process-Write</code></li>
<li>ä¸¤ç§å®ç°æ–¹å¼å¯ä»¥å•ç‹¬ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥ä¸€èµ·ä½¿ç”¨</li>
<li>Spring Batch æä¾›äº† skip å’Œ retry æœºåˆ¶</li>
</ul>
<figure data-type="image" tabindex="1"><img src="https://xuyj1111.github.io/post-images/1677722470742.png" alt="" loading="lazy"></figure>
<h2 id="ä½¿ç”¨-tasklet">ä½¿ç”¨ Tasklet</h2>
<p>Tasklet åªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œå®ç°<code>org.springframework.batch.core.step.tasklet.Tasklet</code>æ¥å£ï¼Œåœ¨<code>execute</code>æ–¹æ³•ä¸­ç¼–å†™é€»è¾‘<br>
å½“ Tasklet å®ç°ç±»è¿”å›<code>RepeatStatus.FINISHED</code>ï¼ŒJob ä¼šæ‰§è¡Œä¸‹ä¸€ä¸ª Step</p>
<pre><code class="language-java">@Configuration
@EnableBatchProcessing
public class MyJobConfiguration {

    @Autowired
    private JobBuilderFactory jobBuilderFactory;

    @Autowired
    private StepBuilderFactory stepBuilderFactory;

    @Bean
    public Step step1() {
        return stepBuilderFactory.get(&quot;step1&quot;)
                .tasklet((stepContribution, chunkContext) -&gt; {
                    // Step1çš„é€»è¾‘
                    return RepeatStatus.FINISHED;
                }).build();
    }

    @Bean
    public Step step2() {
        return stepBuilderFactory.get(&quot;step2&quot;)
                .tasklet((stepContribution, chunkContext) -&gt; {
                    // Step2çš„é€»è¾‘
                    return RepeatStatus.FINISHED;
                }).build();
    }

    @Bean
    public Step step3() {
        return stepBuilderFactory.get(&quot;step3&quot;)
                .tasklet((stepContribution, chunkContext) -&gt; {
                    // Step3çš„é€»è¾‘
                    return RepeatStatus.FINISHED;
                }).build();
    }

    @Bean
    public Job myJob() {
        return jobBuilderFactory.get(&quot;myJob&quot;)
                .start(step1())
                .next(step2())
                .next(step3())
                .build();
    }
}
</code></pre>
<h2 id="ä½¿ç”¨-read-process-write">ä½¿ç”¨ Read-Process-Write</h2>
<p>Read-Process-Write ä¼šæ‰§è¡Œå¤šæ¬¡ï¼Œ<code>chunk(int chunkSize)</code>ä¸­çš„å€¼è¡¨ç¤ºä¸€æ¬¡ Read-Process-Write çš„å¤„ç†é‡<br>
æ­¤æ¬¡ä½¿ç”¨<code>FlatFileItemReader</code>è¯»æ•°æ®ï¼Œ<code>JpaItemWriter</code>å†™æ•°æ®</p>
<pre><code class="language-java">public class MessageProcessor implements ItemProcessor&lt;Message, Message&gt; {
    @Override
    public Message process(Message item) {
        System.out.println(&quot;item: &quot; + item.toString());
        return item;
    }
}
public class MessageItemReadListener implements ItemReadListener&lt;Message&gt; {
	//
}
public class MessageWriteListener implements ItemWriteListener&lt;Message&gt; {
	//
}
public class MessageLineMapper implements LineMapper&lt;Message&gt; {
    //
}
public class Message {
    //
}
</code></pre>
<pre><code class="language-java">public class MessageMigrationJobConfiguration {

    private static final Integer CHUNK_SIZE = 4;
    private static final String MESSAGE_FILE = &quot;src/main/resources/file/message.txt&quot;;
    private static final Integer SKIP_LIMIT = 1;

    @Autowired
    private JobBuilderFactory jobBuilderFactory;

    @Autowired
    private StepBuilderFactory stepBuilderFactory;

    @Autowired
    private EntityManagerFactory entityManager;

    /**
     * @Description: æ„å»ºjob
     */
    @Bean
    public Job messageMigrationJob(@Qualifier(&quot;messageMigrationStep&quot;) Step messageMigrationStep) {
        return jobBuilderFactory.get(&quot;messageMigrationJob&quot;)
                .flow(messageMigrationStep)
                .end()
                .build();
    }

    /**
     * @Description: æ„å»ºstep
     */
    @Bean
    public Step messageMigrationStep(@Qualifier(&quot;jsonMessageReader&quot;) FlatFileItemReader&lt;Message&gt; jsonMessageReader,
                                     @Qualifier(&quot;messageProcessor&quot;) MessageProcessor messageProcessor,
                                     @Qualifier(&quot;messageItemWriter&quot;) JpaItemWriter&lt;Message&gt; messageItemWriter) {
        return stepBuilderFactory.get(&quot;messageMigrationStep&quot;)
                .&lt;Message, Message&gt;chunk(CHUNK_SIZE)
                .reader(jsonMessageReader).faultTolerant().skip(JsonParseException.class).skipLimit(SKIP_LIMIT)
                .listener(new MessageItemReadListener())
                .processor(messageProcessor)
                .writer(messageItemWriter).faultTolerant().skip(Exception.class).skipLimit(SKIP_LIMIT)
                .listener(new MessageWriteListener())
                .build();
    }

    /**
     * @Description: æ„å»ºreader
     * FlatFileItemReaderï¼šä»æ–‡ä»¶é‡Œé¢ä¸€è¡Œä¸€è¡Œçš„è¯»å–æ•°æ®
     * .setResourceï¼šè®¾ç½®æ–‡ä»¶è·¯å¾„
     * .setLineMapperï¼šæŠŠä¸€è¡Œæ–‡æœ¬æ˜ å°„ä¸ºMessageç±»ï¼Œè‡ªå®šä¹‰ç±»
     */
    @Bean
    public FlatFileItemReader&lt;Message&gt; jsonMessageReader() {
        FlatFileItemReader&lt;Message&gt; reader = new FlatFileItemReader&lt;&gt;();
        reader.setResource(new FileSystemResource(new File(MESSAGE_FILE)));
        reader.setLineMapper(new MessageLineMapper());
        return reader;
    }

    @Bean
    public MessageProcessor messageProcessor() {
        return new MessageProcessor();
    }

    /**
     * @Description: æ„å»ºwriter
     */
    @Bean
    public JpaItemWriter&lt;Message&gt; messageItemWriter() {
        JpaItemWriter&lt;Message&gt; writer = new JpaItemWriter&lt;&gt;();
        writer.setEntityManagerFactory(entityManager);
        return writer;
    }
}
</code></pre>
<h2 id="æ³¨è§£">æ³¨è§£</h2>
<ul>
<li><code>@EnableBatchProcessing</code>æ‰“å¼€Batchã€‚å¦‚æœå¤š job çš„æƒ…å†µï¼Œéœ€è¦æŠŠ EnableBatchProcessing æ³¨è§£çš„ modular è®¾ç½®ä¸º true ï¼Œè®©æ¯ä¸ª Job ä½¿ç”¨è‡ªå·±çš„ ApplicationConext</li>
<li><code>@JobScope</code>ä½œç”¨åŸŸæ³¨è§£ã€‚åº”ç”¨äº step æˆ– readerã€processorã€writer ç­‰ç»„ä»¶çš„ @Bean æ–¹æ³•ä¸­ï¼Œç”¨äºæŒ‡å®šç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸèŒƒå›´ä¸º Jobã€‚ä½¿ç”¨ @JobScope æ³¨è§£çš„ç»„ä»¶ï¼Œå°†åœ¨ Job æ‰§è¡ŒæœŸé—´å®ä¾‹åŒ–ä¸€æ¬¡ï¼Œç„¶ååœ¨ Job æ‰§è¡Œå®Œæˆåé”€æ¯ã€‚è¿™ä½¿å¾—ç»„ä»¶å¯ä»¥æ‹¥æœ‰ Job çš„ä¸Šä¸‹æ–‡ï¼ŒåŒ…æ‹¬ JobParametersã€ExecutionContext ç­‰ï¼Œä»è€Œå¯ä»¥åœ¨ Job æ‰§è¡ŒæœŸé—´è·å– Job çš„ç›¸å…³ä¿¡æ¯ã€‚</li>
</ul>
<h2 id="å¸¸ç”¨ç±»">å¸¸ç”¨ç±»</h2>
<ul>
<li><code>JobLauncher</code>å¯åŠ¨ job ç±»</li>
<li><code>JobRegistry</code>å­˜å‚¨å¤šä¸ª job å®ä¾‹ï¼ŒJobRegistry å¯ä»¥é€šè¿‡ job å®ä¾‹çš„å”¯ä¸€åç§°è·å– job</li>
<li><code>JobBuilderFactory</code>æ„å»º JobBuilder å¯¹è±¡çš„å·¥å‚ç±»
<ul>
<li>é€šå¸¸ç”¨<code>JobBuilder get(String name)</code>æ„å»º JobBuilder</li>
</ul>
</li>
<li><code>StepBuilderFactory</code>æ„å»º StepBuilder å¯¹è±¡çš„å·¥å‚ç±»
<ul>
<li>é€šå¸¸ç”¨<code>StepBuilder get(String name)</code>æ„å»º StepBuilder</li>
</ul>
</li>
</ul>
<h3 id="jobparameters">JobParameters</h3>
<p>å­˜å‚¨ä¸€ç»„æœ‰åºçš„é”®å€¼å¯¹ï¼Œè¿™äº›é”®å€¼ç”¨äº Job æˆ– Step çš„è¿è¡Œæ—¶å‚æ•°</p>
<pre><code class="language-java">@Autowired
private JobLauncher jobLauncher;

public void executeJob(Job job) {
    JobParameters params = new JobParametersBuilder()
        .addLong(key, value, true)
        .addString(key, value, true)
        .toJobParameters();
    
    jobLauncher.run(job, params)
}
</code></pre>
<ul>
<li>åœ¨æ„å»º job æ—¶ï¼ˆæˆ–step/tasklet/chunk/reader...ï¼‰éœ€è¦å‚æ•°ä¿¡æ¯ï¼Œä½¿ç”¨<code>@Value(&quot;#{jobParameters['...']}&quot;)</code>æ³¨è§£çš„æ–¹å¼æ³¨å…¥</li>
<li>éœ€è¦ä½¿ç”¨ @JobScope æ³¨è§£</li>
</ul>
<pre><code class="language-java">@Bean
@JobScope
ItemProcessor&lt;Xxx, Xxx&gt; processor(@Value(&quot;#{jobParameters['Xxx']}&quot;) String Xxx,
                                  @Value(&quot;#{jobParameters['Xxx']}&quot;) String Xxx) {
    return null;
}
</code></pre>
<h3 id="jobbuilder">JobBuilder</h3>
<blockquote>
<p>ç”¨æ¥åˆ›å»º Job å®ä¾‹</p>
</blockquote>
<p>å¸¸ç”¨æ–¹æ³•ğŸ‘‡</p>
<ol>
<li><code>name(String name)</code>ä¸ºJobå®ä¾‹æŒ‡å®šåç§°</li>
<li><code>incrementer(JobParametersIncrementer incrementer)</code>æŒ‡å®š JobParametersIncrementer å®ä¾‹ï¼Œç”¨äºç”Ÿæˆ Job å‚æ•°</li>
<li><code>start(Step step)</code>è¿”å› SimpleJobBuilderï¼ŒæŒ‡å®š Job å®ä¾‹çš„ç¬¬ä¸€ä¸ª Step å®ä¾‹</li>
<li><code>flow(Step step)</code>è¿”å› JobFlowBuilderï¼ŒæŒ‡å®š Job å®ä¾‹çš„ç¬¬ä¸€ä¸ª Step å®ä¾‹</li>
<li><code>listener(JobExecutionListener listener)</code>æŒ‡å®š JobExecutionListener å®ä¾‹ï¼Œç”¨äºç›‘å¬ Job çš„æ‰§è¡Œ</li>
<li><code>listener(StepExecutionListener listener)</code>æŒ‡å®š StepExecutionListener å®ä¾‹ï¼Œç”¨äºç›‘å¬ Job çš„æ¯ä¸ª Step çš„æ‰§è¡Œ</li>
<li><code>validator(JobParametersValidator validator)</code>æŒ‡å®š JobParametersValidator å®ä¾‹ï¼Œç”¨äºéªŒè¯ Job å‚æ•°çš„åˆæ³•æ€§</li>
<li><code>build()</code>æ„å»º Job å®ä¾‹</li>
</ol>
<h3 id="job">Job</h3>
<p>Job æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p>
<ol>
<li><code>SimpleJob</code>åŒ…å«ä¸€ä¸ª Stepï¼Œæ‰§è¡Œå®Œ Step åå³ç»“æŸ</li>
<li><code>FlowJob</code>åŒ…å«å¤šä¸ª Step ç»„æˆçš„é€»è¾‘æµï¼Œæ ¹æ® Step æ‰§è¡Œç»“æœçŠ¶æ€ï¼Œé€šè¿‡å†³ç­–å™¨å®ç°åˆ†æ”¯</li>
<li><code>SplitJob</code>åŒ…å«å¤šä¸ª Stepï¼Œè¿™äº› Step å¯ä»¥å¹¶è¡Œæ‰§è¡Œ</li>
<li><code>ChildJob</code>åœ¨ä¸€ä¸ª Job ä¸­å¯ä»¥åŒ…å«å…¶ä»– Jobï¼Œå½¢æˆæ ‘å½¢ç»“æ„ï¼Œçˆ¶Job å¯ä»¥å†³å®š å­Job çš„æ‰§è¡Œé¡ºåºå’Œæ‰§è¡Œæ¡ä»¶</li>
<li><code>CompositeJob</code>é€šè¿‡è®²å¤šä¸ª Job ç»„åˆåœ¨ä¸€èµ·ï¼Œå®ç°ä¸€ä¸ª Job åŒ…å«å¤šä¸ª å­Job çš„æ•ˆæœï¼Œå­Job å¯ä»¥å¹¶è¡Œæˆ–ä¸²è¡Œæ‰§è¡Œï¼Œç›¸äº’ç‹¬ç«‹</li>
</ol>
<p><strong><em>p.s.</em></strong> è¿™äº› Job ä¹‹é—´å¹¶ä¸æ˜¯äº’æ–¥çš„ï¼Œå¯ä»¥æ··åˆä½¿ç”¨ã€‚å¯ä»¥ä½¿ç”¨<code>JobStepBuilder</code>å°†ä¸€ä¸ª Job å°è£…æˆ Stepï¼Œç„¶ååœ¨å¦ä¸€ä¸ª Job ä¸­å¼•ç”¨è¿™ä¸ª Step</p>
<h3 id="stepbuilder">StepBuilder</h3>
<blockquote>
<p>ç”¨æ¥åˆ›å»º Step å®ä¾‹</p>
</blockquote>
<p>å¸¸ç”¨æ–¹æ³•ğŸ‘‡</p>
<ol>
<li><code>tasklet(Tasklet tasklet)</code>æŒ‡å®š Step ä¸­ä½¿ç”¨çš„ Taskletï¼Œæ¯ä¸ª Step è‡³å°‘è¦æœ‰ä¸€ä¸ª Tasklet</li>
<li><code>chunk(int chunkSize)</code>æŒ‡å®šæ¯æ¬¡è¯»å–å¤šå°‘æ•°æ®è¿›è¡Œå¤„ç†ï¼Œä»¥åŠå¤„ç†å®Œåä¸€æ¬¡æ€§å†™å‡ºçš„æ•°æ®é‡</li>
<li><code>reader(ItemReader&lt;? extends T&gt; itemReader)</code>æŒ‡å®š Step ä¸­ä½¿ç”¨çš„ ItemReader</li>
<li><code>processor(ItemProcessor&lt;? super T, ? extends S&gt; itemProcessor)</code>æŒ‡å®š Step ä¸­ä½¿ç”¨çš„ ItemProcessor</li>
<li><code>writer(ItemWriter&lt;? super S&gt; itemWriter)</code>æŒ‡å®š Step ä¸­ä½¿ç”¨çš„ ItemWriter</li>
<li><code>allowStartIfComplete(boolean allowStart)</code>æ˜¯å¦å…è®¸ Step åœ¨ä¸Šä¸€æ¬¡æ‰§è¡Œå®Œæˆåç«‹å³å†æ¬¡æ‰§è¡Œ</li>
<li><code>flow(Flow flow)</code>è¿”å› FlowStepBuilderï¼ŒæŒ‡å®š Step çš„ Flow å®ä¾‹</li>
</ol>
<h3 id="step">Step</h3>
<p>Step æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p>
<ol>
<li><code>SimpleStep</code>æŒ‡å®šè¯»ã€å¤„ç†ã€å†™æ“ä½œã€å•çº¿ç¨‹ã€‘</li>
<li><code>ChunkOrientedTasklet</code>å¯ä»¥åŒ…æ½è¯»ã€å¤„ç†ã€å†™æ“ä½œã€å•çº¿ç¨‹ã€‘</li>
<li><code>TaskletStep</code>æŒ‡å®šå¹¶æ‰§è¡Œä¸€ä¸ª Taskletã€å•çº¿ç¨‹ã€‘</li>
<li><code>FlowStep</code>ä¸­æœ‰ä¸€ä¸ª Flow å®ä¾‹ï¼ŒFlow å®ä¾‹ä¸­å¯ä»¥æœ‰å¤šä¸ª Stepï¼Œå¯è¿›è¡Œæ¡ä»¶æ§åˆ¶ï¼Œå¦‚è·³è¿‡æŸäº›æ­¥éª¤ã€é‡è¯•æŸäº›æ­¥éª¤ç­‰ã€å•çº¿ç¨‹ã€‘</li>
</ol>
<p>å¤šçº¿ç¨‹çš„ Step æœ‰<code>SimpleAsyncTaskExecutorStep</code>ã€<code>TaskExecutorStep</code>ã€<code>PartitionStep</code></p>
<h3 id="listener">Listener</h3>
<p>Listener æ¥å£éœ€è¦å®ç°ä½¿ç”¨ï¼Œéƒ½æœ‰<code>beforeXxx</code>å’Œ<code>afterXxx</code>æ–¹æ³•ã€‚åœ¨å¯¹åº”ä½ç½®ä½¿ç”¨ï¼Œå¦‚ Step çš„ç›‘å¬å™¨ï¼Œåœ¨åˆ›å»º Step æ—¶ä½¿ç”¨ï¼›Job çš„ç›‘å¬å™¨ï¼Œåœ¨åˆ›å»º Job æ—¶ä½¿ç”¨<br>
å¸¸ç”¨æ¥å£ğŸ‘‡</p>
<ol>
<li><code>StepExecutionListener</code>step <strong>æ‰§è¡Œ</strong>ç›‘å¬å™¨</li>
<li><code>ItemReadListener</code>step <strong>è¯»</strong>ç›‘å¬å™¨</li>
<li><code>ItemWriteListener</code>step <strong>å†™</strong>ç›‘å¬å™¨</li>
<li><code>JobExecutionListener</code>job <strong>æ‰§è¡Œ</strong>ç›‘å¬å™¨</li>
</ol>
<h3 id="itemreader">ItemReader</h3>
<p>step çš„è¯»æ“ä½œï¼ŒSpringBatch æä¾›å¤šä¸ªå®ç°ç±»ğŸ‘‡</p>
<ol>
<li><code>JdbcCursorItemReader</code>ç”¨äºä» JDBC æ¸¸æ ‡æ£€ç´¢ç»“æœé›†</li>
<li><code>JdbcPagingItemReader</code>ç”¨äºä» JDBC åˆ†é¡µæ£€ç´¢ç»“æœé›†</li>
<li><code>HibernateCursorItemReader</code>ç”¨äºä» Hibernate æ¸¸æ ‡æ£€ç´¢ç»“æœé›†</li>
<li><code>HibernatePagingItemReader</code>ç”¨äºä» Hibernate åˆ†é¡µæ£€ç´¢ç»“æœé›†</li>
<li><code>JpaPagingItemReader</code>ç”¨äºä» JPA åˆ†é¡µæ£€ç´¢ç»“æœé›†</li>
<li><code>FlatFileItemReader</code>ç”¨äºä»æ–‡ä»¶ä¸­è¯»å–æ•°æ®</li>
<li><code>StaxEventItemReader</code>è¯»å– XML æ–‡ä»¶</li>
<li><code>JsonItemReader</code>è¯»å– Json æ ¼å¼æ•°æ®</li>
</ol>
<p>è‡ªå®šä¹‰ ItemReaderï¼šå®ç° ItemReader æ¥å£ï¼Œå¹¶é‡å†™ read æ–¹æ³•ï¼Œè¯¥æ–¹æ³•éœ€è¦è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå¦‚æœæ²¡æœ‰è¯»åˆ°æ•°æ®åˆ™è¿”å› null</p>
<h3 id="itemwriter">ItemWriter</h3>
<p>step çš„å†™æ“ä½œï¼ŒSpringBatch æä¾›å¤šä¸ªå®ç°ç±»ğŸ‘‡</p>
<ol>
<li><code>JdbcBatchItemWriter</code>å°†æ•°æ®æ‰¹é‡å†™å…¥å…³ç³»å‹æ•°æ®åº“</li>
<li><code>JpaItemWriter</code>å°†æ•°æ®æ‰¹é‡å†™å…¥ JPA å®ä½“ç±»</li>
<li><code>HibernateItemWriter</code>å°†æ•°æ®æ‰¹é‡å†™å…¥ Hibernate å®ä½“ç±»</li>
<li><code>FlatFileItemWriter</code>å°†æ•°æ®å†™å…¥æ–‡æœ¬æ–‡ä»¶</li>
<li><code>MultiResourceItemWriter</code>å°†æ•°æ®å†™å…¥å¤šä¸ªæ–‡ä»¶</li>
<li><code>MongoItemWriter</code>å°†æ•°æ®æ‰¹é‡å†™å…¥ MongoDB</li>
<li><code>HdfsTextItemWriter</code>å°†æ•°æ®å†™å…¥ HDFS æ–‡ä»¶</li>
</ol>
<p>è‡ªå®šä¹‰ ItemWriterï¼šé€šè¿‡å®ç° ItemWriter æ¥å£ï¼Œå¹¶é‡å†™ write æ–¹æ³•</p>

              </div>
              <div class="toc-container">
                <ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#%E4%BD%BF%E7%94%A8-tasklet">ä½¿ç”¨ Tasklet</a></li>
<li><a href="#%E4%BD%BF%E7%94%A8-read-process-write">ä½¿ç”¨ Read-Process-Write</a></li>
<li><a href="#%E6%B3%A8%E8%A7%A3">æ³¨è§£</a></li>
<li><a href="#%E5%B8%B8%E7%94%A8%E7%B1%BB">å¸¸ç”¨ç±»</a>
<ul>
<li><a href="#jobparameters">JobParameters</a></li>
<li><a href="#jobbuilder">JobBuilder</a></li>
<li><a href="#job">Job</a></li>
<li><a href="#stepbuilder">StepBuilder</a></li>
<li><a href="#step">Step</a></li>
<li><a href="#listener">Listener</a></li>
<li><a href="#itemreader">ItemReader</a></li>
<li><a href="#itemwriter">ItemWriter</a></li>
</ul>
</li>
</ul>
</li>
</ul>

              </div>
            </div>
          </article>
        </div>

        
          <div class="next-post">
            <div class="next">ä¸‹ä¸€ç¯‡</div>
            <a href="https://xuyj1111.github.io/Kbdumv2S0/">
              <h3 class="post-title">
                ã€Javaã€‘ä¸‰ç§ ThreadLocal çš„ç®€å•ä½¿ç”¨
              </h3>
            </a>
          </div>
        

        

        <div class="site-footer">
  
  <a class="rss" href="https://xuyj1111.github.io/atom.xml" target="_blank">
    <i class="ri-rss-line"></i> RSS
  </a>
</div>

      </div>
    </div>

    <script>
      hljs.initHighlightingOnLoad()

      let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");

      // This should probably be throttled.
      // Especially because it triggers during smooth scrolling.
      // https://lodash.com/docs/4.17.10#throttle
      // You could do like...
      // window.addEventListener("scroll", () => {
      //    _.throttle(doThatStuff, 100);
      // });
      // Only not doing it here to keep this Pen dependency-free.

      window.addEventListener("scroll", event => {
        let fromTop = window.scrollY;

        mainNavLinks.forEach((link, index) => {
          let section = document.getElementById(decodeURI(link.hash).substring(1));
          let nextSection = null
          if (mainNavLinks[index + 1]) {
            nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(1));
          }
          if (section.offsetTop <= fromTop) {
            if (nextSection) {
              if (nextSection.offsetTop > fromTop) {
                link.classList.add("current");
              } else {
                link.classList.remove("current");    
              }
            } else {
              link.classList.add("current");
            }
          } else {
            link.classList.remove("current");
          }
        });
      });

    </script>



    <div id="vcomments"></div>
    <script>
        new Valine({
            el: '#vcomments',
            appId: 'ot2L3hKJVxTAXnr1VQt7wm70-gzGzoHsz',
            appKey: 'BjaYGo2m6zV3mCvxGLGsDP5V'
        })
    </script>



  </body>

</html>
